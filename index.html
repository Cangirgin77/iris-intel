<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IRIS ‚Ä¢ AI Marka G√∂r√ºn√ºrl√ºk Analizi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
    * { font-family: 'Inter', sans-serif; }
    body { background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%); }
    
    .gradient-text { 
      background: linear-gradient(90deg, #60a5fa, #a78bfa, #f472b6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .glass-card {
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid rgba(148, 163, 184, 0.1);
      backdrop-filter: blur(10px);
    }
    
    .hidden-section { display: none; }
    
    .shimmer { animation: shimmer 2s infinite; }
    @keyframes shimmer {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }
    
    .pulse-slow { animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    
    .fade-in { animation: fadeIn 0.5s ease-in; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .score-circle {
      width: 140px; height: 140px; border-radius: 50%;
      background: conic-gradient(from 0deg, #ef4444 0deg, #f59e0b calc(var(--score) * 3.6deg), #10b981 calc(var(--score) * 3.6deg), #334155 360deg);
      display: flex; align-items: center; justify-content: center; position: relative;
    }
    
    .score-inner {
      width: 120px; height: 120px; border-radius: 50%; background: #0f172a;
      display: flex; align-items: center; justify-content: center; flex-direction: column;
    }

    /* G√ñZ ANƒ∞MASYONU */
    @keyframes lookAround {
      0%, 100% { transform: translateX(0) translateY(0); }
      40% { transform: translateX(-8px) translateY(2px); }
      80% { transform: translateX(8px) translateY(-2px); }
    }
    
    @keyframes blink {
      0%, 45%, 55%, 100% { transform: scaleY(1); }
      50% { transform: scaleY(0.05); }
    }
    
    .digital-eye-pupil {
      animation: lookAround 8s infinite cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .digital-eye-lid {
      animation: blink 6s infinite ease-in-out;
    }
    
    .matrix-glow {
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
    }
  </style>
</head>
<body class="min-h-screen text-white">

  <!-- INPUT SECTION -->
  <div id="section-input" class="container mx-auto px-4 py-12 max-w-6xl">
    
    <div class="text-center mb-16 fade-in">
      <!-- G√ñZ ANƒ∞MASYONU -->
      <div class="mb-10 relative group cursor-default inline-block">
        <div class="absolute -inset-8 bg-emerald-500/10 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-1000"></div>
        <div class="w-32 h-32 bg-[#020617] rounded-full flex items-center justify-center relative overflow-hidden shadow-2xl border-[4px] border-slate-800 digital-eye-lid matrix-glow">
          <div class="absolute inset-0 opacity-20" style="background-image:radial-gradient(#10b981 1px,transparent 1px);background-size:8px 8px"></div>
          <div class="w-10 h-10 bg-emerald-600 rounded-full relative digital-eye-pupil shadow-[0_0_20px_rgba(16,185,129,0.8)] flex items-center justify-center border border-emerald-400">
            <div class="w-4 h-4 bg-black rounded-full opacity-60"></div>
            <div class="absolute top-2 right-2 w-1.5 h-1.5 bg-white rounded-full opacity-90"></div>
          </div>
        </div>
      </div>

      <h1 class="text-6xl font-black mb-4">
        <span class="gradient-text">IRIS</span>
      </h1>
      <p class="text-slate-400 text-lg max-w-2xl mx-auto leading-relaxed">
        Markanƒ±zƒ±n <strong>ChatGPT, Gemini, Claude</strong> gibi yapay zeka platformlarƒ±nda ne kadar g√∂r√ºn√ºr olduƒüunu ke≈üfedin.
      </p>
      <div class="flex items-center justify-center gap-2 mt-6">
        <span class="inline-block w-2 h-2 bg-green-500 rounded-full pulse-slow"></span>
        <span class="text-xs text-slate-500 uppercase tracking-wider">Gemini 2.0 Flash Teknolojisi</span>
      </div>
    </div>

    <div class="glass-card rounded-3xl p-8 mb-12 max-w-2xl mx-auto fade-in">
      <div class="mb-6">
        <label class="block text-sm font-semibold text-slate-300 mb-2">Marka Adƒ±</label>
        <input 
          id="brandInput" 
          type="text" 
          placeholder="√ñrn: Tesla, Apple, Nike..."
          class="w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
        >
      </div>
      
      <div class="mb-6">
        <label class="block text-sm font-semibold text-slate-300 mb-2">Sekt√∂r</label>
        <input 
          id="industryInput" 
          type="text" 
          placeholder="√ñrn: Otomotiv, Teknoloji, Gƒ±da..."
          class="w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
        >
      </div>

      <button 
        onclick="startAnalysis()"
        class="w-full py-4 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-xl font-bold text-white hover:scale-[1.02] transition-transform shadow-lg"
      >
        üîç ANALƒ∞Zƒ∞ BA≈ûLAT
      </button>
    </div>

  </div>

  <!-- LOADING SECTION -->
  <div id="section-loading" class="hidden-section container mx-auto px-4 py-12 max-w-2xl">
    <div class="glass-card rounded-3xl p-12 text-center fade-in">
      <div class="score-circle mx-auto mb-6" style="--score: 50;">
        <div class="score-inner"><div class="text-2xl font-bold shimmer">‚ö°</div></div>
      </div>
      <h3 class="text-2xl font-bold mb-3">Analiz Yapƒ±lƒ±yor...</h3>
      <p id="loadingText" class="text-slate-400 text-sm mb-6">
        üîç AI platformlarƒ± taranƒ±yor...
      </p>
      <div class="flex justify-center gap-2">
        <span class="w-2 h-2 bg-blue-500 rounded-full shimmer" style="animation-delay: 0s"></span>
        <span class="w-2 h-2 bg-purple-500 rounded-full shimmer" style="animation-delay: 0.2s"></span>
        <span class="w-2 h-2 bg-pink-500 rounded-full shimmer" style="animation-delay: 0.4s"></span>
      </div>
    </div>
  </div>

  <!-- RESULTS SECTION -->
  <div id="section-results" class="hidden-section container mx-auto px-4 py-12 max-w-7xl">
    
    <!-- Header -->
    <div class="glass-card rounded-3xl p-8 mb-6 fade-in">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="flex-1">
          <h2 class="text-3xl font-black mb-2">
            Analiz Raporu
            <span class="inline-block px-3 py-1 ml-3 text-xs font-bold bg-green-500/20 text-green-400 rounded-full">CONFIDENTIAL</span>
          </h2>
          <p id="resBrandName" class="text-slate-400 text-lg">-</p>
        </div>
        <div class="text-center">
          <div class="score-circle mx-auto mb-2" id="scoreCircle" style="--score: 0;">
            <div class="score-inner">
              <div id="resScore" class="text-4xl font-black text-white">0</div>
              <div class="text-[9px] text-slate-500 uppercase tracking-wider">Skor</div>
            </div>
          </div>
          <div id="scoreCategory" class="inline-block px-3 py-1 text-xs font-bold rounded-full bg-slate-800 text-slate-400 mb-2">-</div>
          <p id="resScoreExplanation" class="text-xs text-slate-400 max-w-xs leading-relaxed"></p>
        </div>
      </div>
    </div>

    <!-- Main Grid -->
    <div class="grid lg:grid-cols-2 gap-6">
      
      <!-- LEFT COLUMN -->
      <div class="space-y-6">
        
        <!-- Kimlik Tespiti -->
        <div class="glass-card rounded-3xl p-6 fade-in">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center">
              <i data-lucide="fingerprint" class="w-5 h-5 text-blue-400"></i>
            </div>
            <div>
              <h3 class="text-lg font-bold">Kimlik Tespiti</h3>
              <p class="text-xs text-slate-500">Beyan vs. AI Algƒ±sƒ±</p>
            </div>
          </div>
          
          <div class="relative pl-4 mb-4">
            <div id="matchIndicator" class="absolute top-0 left-0 w-1 h-full bg-emerald-500 rounded-full"></div>
            <div class="grid grid-cols-2 gap-3">
              <div class="bg-slate-800/50 rounded-lg p-3 border border-slate-700">
                <div class="text-[9px] text-slate-500 uppercase tracking-wider mb-1">Beyan</div>
                <div id="resClaimedSector" class="text-sm font-semibold text-slate-300">-</div>
              </div>
              <div class="bg-slate-800/50 rounded-lg p-3 border border-slate-700">
                <div class="text-[9px] text-slate-500 uppercase tracking-wider mb-1">AI Tespiti</div>
                <div id="resDetectedSector" class="text-sm font-semibold text-slate-300">-</div>
              </div>
            </div>
            <div class="mt-3 flex items-center justify-between">
              <span class="text-xs text-slate-500">Durum:</span>
              <span id="resMatchStatus" class="text-[9px] font-bold px-2 py-0.5 rounded bg-emerald-950 text-emerald-400 border border-emerald-900">-</span>
            </div>
          </div>

          <div id="resInsight" class="bg-slate-800/30 rounded-lg p-3 border-l-2 border-blue-500 text-xs text-slate-300 leading-relaxed">
            <span>-</span>
          </div>
        </div>

        <!-- Platforms -->
        <div class="glass-card rounded-3xl p-6 fade-in">
          <h3 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Taranan Platformlar</h3>
          <div id="resPlatforms" class="space-y-2"></div>
        </div>

        <!-- Y√∂netici √ñzeti -->
        <div class="glass-card rounded-3xl p-6 fade-in">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 rounded-xl bg-purple-500/20 flex items-center justify-center">
              <i data-lucide="file-text" class="w-5 h-5 text-purple-400"></i>
            </div>
            <h3 class="text-lg font-bold">Y√∂netici √ñzeti</h3>
          </div>
          <p id="resSummary" class="text-sm text-slate-300 leading-relaxed">-</p>
        </div>

        <!-- G√º√ßl√º/Zayƒ±f Y√∂nler -->
        <div class="grid grid-cols-2 gap-4">
          <div class="glass-card rounded-2xl p-4 fade-in">
            <h3 class="text-sm font-bold mb-3 flex items-center gap-2">
              <i data-lucide="thumbs-up" class="w-4 h-4 text-emerald-400"></i>
              <span>G√º√ßl√º Y√∂nler</span>
            </h3>
            <ul id="resStrengths" class="space-y-2 text-xs text-slate-400"></ul>
          </div>
          <div class="glass-card rounded-2xl p-4 fade-in">
            <h3 class="text-sm font-bold mb-3 flex items-center gap-2">
              <i data-lucide="alert-triangle" class="w-4 h-4 text-rose-400"></i>
              <span>Zayƒ±f Y√∂nler</span>
            </h3>
            <ul id="resWeaknesses" class="space-y-2 text-xs text-slate-400"></ul>
          </div>
        </div>

      </div>

      <!-- RIGHT COLUMN -->
      <div class="space-y-6">
        
        <!-- Rakipler -->
        <div class="glass-card rounded-3xl p-6 fade-in">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 rounded-xl bg-pink-500/20 flex items-center justify-center">
              <i data-lucide="users" class="w-5 h-5 text-pink-400"></i>
            </div>
            <h3 class="text-lg font-bold">Rakip Analizi</h3>
          </div>
          <div id="resCompetitors" class="space-y-3"></div>
        </div>

        <!-- Daha G√∂r√ºn√ºr Olmak ƒ∞√ßin Tavsiyeler -->
        <div class="glass-card rounded-3xl p-6 fade-in">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 rounded-xl bg-yellow-500/20 flex items-center justify-center">
              <i data-lucide="lightbulb" class="w-5 h-5 text-yellow-400"></i>
            </div>
            <h3 class="text-lg font-bold">Daha G√∂r√ºn√ºr Olmak ƒ∞√ßin Tavsiyeler</h3>
          </div>
          <div class="bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-lg p-4 border border-yellow-500/20">
            <ul id="resVisibilityRecommendations" class="space-y-2 text-xs text-slate-200"></ul>
          </div>
        </div>

        <!-- Algƒ± Optimizasyonu -->
        <div class="glass-card rounded-3xl p-6 fade-in">
          <div class="flex items-center gap-3 mb-4">
            <div class="w-10 h-10 rounded-xl bg-green-500/20 flex items-center justify-center">
              <i data-lucide="target" class="w-5 h-5 text-green-400"></i>
            </div>
            <h3 class="text-lg font-bold">Algƒ± Optimizasyonu</h3>
          </div>
          
          <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-700">
            <p id="resOptRationale" class="text-xs text-slate-400 leading-relaxed whitespace-pre-line">-</p>
          </div>
        </div>

      </div>

    </div>

    <!-- Reset Button -->
    <div class="text-center mt-8">
      <button 
        onclick="resetApp()"
        class="px-6 py-3 bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-xl font-semibold text-white transition"
      >
        üîÑ Yeni Analiz Yap
      </button>
    </div>

  </div>

  <script>
    lucide.createIcons();

    const VERCEL_BACKEND_URL = "https://iris-intel.vercel.app/api/analyze";

    const loadingMessages = [
      "üîç AI platformlarƒ± taranƒ±yor...",
      "ü§ñ ChatGPT, Claude, Gemini sorgulanƒ±yor...",
      "üìä Rakip analizi yapƒ±lƒ±yor...",
      "üí° Detaylƒ± √∂neriler hazƒ±rlanƒ±yor...",
      "üéØ Veriler i≈üleniyor..."
    ];

    let loadingInterval;

    function showSection(id) {
      ['section-input', 'section-loading', 'section-results'].forEach(sec => {
        document.getElementById(sec).classList.add('hidden-section');
      });
      document.getElementById(id).classList.remove('hidden-section');
    }

    function resetApp() {
      document.getElementById('brandInput').value = '';
      document.getElementById('industryInput').value = '';
      showSection('section-input');
    }

    async function startAnalysis() {
      const brand = document.getElementById('brandInput').value.trim();
      const industry = document.getElementById('industryInput').value.trim();

      if (!brand || !industry) {
        alert("‚ö†Ô∏è L√ºtfen marka ve sekt√∂r bilgilerini girin!");
        return;
      }

      showSection('section-loading');
      
      let i = 0;
      loadingInterval = setInterval(() => {
        document.getElementById('loadingText').innerText = loadingMessages[i % loadingMessages.length];
        i++;
      }, 2500);

      try {
        const response = await fetch(VERCEL_BACKEND_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ brand, industry }),
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }

        const data = await response.json();
        renderResults(data, brand, industry);

      } catch (error) {
        console.error("Hata:", error);
        alert("‚ùå Analiz ba≈üarƒ±sƒ±z: " + error.message);
        resetApp();
      } finally {
        clearInterval(loadingInterval);
      }
    }

    function renderResults(data, brand, industry) {
      document.getElementById('resBrandName').innerText = `${brand.toUpperCase()} | ${industry.toUpperCase()}`;
      
      const score = data.score || 0;
      document.getElementById('resScore').innerText = score;
      document.getElementById('scoreCircle').style.setProperty('--score', score);
      document.getElementById('resScoreExplanation').innerText = data.scoreExplanation || "";
      
      const categoryBadge = document.getElementById('scoreCategory');
      const category = data.scoreCategory || "Deƒüerlendiriliyor";
      categoryBadge.innerText = category;
      
      if (score >= 90) {
        categoryBadge.className = "inline-block px-3 py-1 text-xs font-bold rounded-full bg-green-500/20 text-green-400 border border-green-500/50";
      } else if (score >= 80) {
        categoryBadge.className = "inline-block px-3 py-1 text-xs font-bold rounded-full bg-blue-500/20 text-blue-400 border border-blue-500/50";
      } else if (score >= 60) {
        categoryBadge.className = "inline-block px-3 py-1 text-xs font-bold rounded-full bg-yellow-500/20 text-yellow-400 border border-yellow-500/50";
      } else if (score >= 40) {
        categoryBadge.className = "inline-block px-3 py-1 text-xs font-bold rounded-full bg-orange-500/20 text-orange-400 border border-orange-500/50";
      } else {
        categoryBadge.className = "inline-block px-3 py-1 text-xs font-bold rounded-full bg-red-500/20 text-red-400 border border-red-500/50";
      }
      
      document.getElementById('resClaimedSector').innerText = data.identityAnalysis?.claimedSector || industry;
      document.getElementById('resDetectedSector').innerText = data.identityAnalysis?.detectedSector || industry;
      
      const matchStatus = document.getElementById('resMatchStatus');
      const indicator = document.getElementById('matchIndicator');
      const status = data.identityAnalysis?.matchStatus || "E≈ûLE≈ûME DOƒûRULANDI";
      matchStatus.innerText = status;
      
      if (status.includes("SAPMA") || status.includes("Yetersiz")) {
        matchStatus.className = "text-[9px] font-bold px-2 py-0.5 rounded bg-rose-950 text-rose-400 border border-rose-900";
        indicator.className = "absolute top-0 left-0 w-1 h-full bg-rose-600 rounded-full";
      } else {
        matchStatus.className = "text-[9px] font-bold px-2 py-0.5 rounded bg-emerald-950 text-emerald-400 border border-emerald-900";
        indicator.className = "absolute top-0 left-0 w-1 h-full bg-emerald-500 rounded-full";
      }
      
      document.getElementById('resInsight').querySelector('span').innerText = data.identityAnalysis?.insight || "-";

      const platformsDiv = document.getElementById('resPlatforms');
      platformsDiv.innerHTML = "";
      (data.platforms || []).forEach(p => {
        platformsDiv.innerHTML += `
          <div class="flex items-center justify-between text-sm p-2 bg-slate-800/50 rounded border border-slate-700">
            <span class="text-xs font-semibold text-slate-300">${p.name}</span>
            <span class="text-[10px] px-2 py-0.5 rounded bg-emerald-950 text-emerald-400 border border-emerald-900">${p.status}</span>
          </div>`;
      });

      document.getElementById('resSummary').innerText = data.strategicSummary || "-";
      
      const strList = document.getElementById('resStrengths');
      strList.innerHTML = "";
      (data.strengths || []).forEach(s => {
        strList.innerHTML += `<li class="flex items-start gap-2"><span class="text-emerald-500 shrink-0">‚Ä¢</span><span>${s}</span></li>`;
      });
      
      const weakList = document.getElementById('resWeaknesses');
      weakList.innerHTML = "";
      (data.weaknesses || []).forEach(w => {
        weakList.innerHTML += `<li class="flex items-start gap-2"><span class="text-rose-500 shrink-0">‚Ä¢</span><span>${w}</span></li>`;
      });

      const compList = document.getElementById('resCompetitors');
      compList.innerHTML = "";
      
      if (data.competitors?.direct && data.competitors.direct.length > 0) {
        compList.innerHTML += `<p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-3">DOƒûRUDAN RAKƒ∞PLER</p>`;
        data.competitors.direct.forEach(c => {
          compList.innerHTML += `
            <div class="bg-slate-800/50 rounded-lg p-3 border border-slate-700 mb-2">
              <div class="flex items-center justify-between mb-1">
                <span class="font-semibold text-slate-300 text-sm">${c.name}</span>
                <span class="text-lg font-bold text-blue-400">${c.score}</span>
              </div>
              <p class="text-[10px] text-slate-500">${c.status}</p>
            </div>`;
        });
      }
      
      if (data.competitors?.leaders && data.competitors.leaders.length > 0) {
        compList.innerHTML += `<p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-3 mt-4">PAZAR Lƒ∞DERLERƒ∞</p>`;
        data.competitors.leaders.forEach(c => {
          compList.innerHTML += `
            <div class="bg-slate-800/50 rounded-lg p-3 border border-slate-700 mb-2">
              <div class="flex items-center justify-between mb-1">
                <span class="font-semibold text-slate-300 text-sm">${c.name}</span>
                <span class="text-lg font-bold text-green-400">${c.score}</span>
              </div>
              <p class="text-[10px] text-slate-500">${c.status}</p>
            </div>`;
        });
      }

      document.getElementById('resOptRationale').innerText = `üéØ HEDEF: ${data.optimization?.objective || "-"}\n\nüìä ANALƒ∞Z: ${data.optimization?.rationale || "-"}`;
      
      const visRecList = document.getElementById('resVisibilityRecommendations');
      visRecList.innerHTML = "";
      (data.visibilityRecommendations || []).forEach((rec, idx) => {
        visRecList.innerHTML += `
          <li class="flex items-start gap-3">
            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-yellow-500/20 text-yellow-400 flex items-center justify-center text-xs font-bold">${idx + 1}</span>
            <span class="leading-relaxed">${rec}</span>
          </li>`;
      });

      lucide.createIcons();
      showSection('section-results');
      setTimeout(() => document.getElementById('section-results').scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
    }

    document.getElementById('brandInput').addEventListener('keypress', e => { if (e.key === 'Enter') startAnalysis(); });
    document.getElementById('industryInput').addEventListener('keypress', e => { if (e.key === 'Enter') startAnalysis(); });
  </script>

</body>
</html>
